"use strict";(self.webpackChunkcrudangular=self.webpackChunkcrudangular||[]).push([[440],{2440:(U,f,i)=>{i.r(f),i.d(f,{AuthModule:()=>l});var c=i(6895),d=i(6773),n=i(433),o=i(8256),g=i(2340),h=i(529);class s{constructor(t){this.http=t,this.URL=g.N.api}sendCredentials(t,e){return this.http.post(`${this.URL}/auth/login`,{email:t,password:e})}}s.\u0275fac=function(t){return new(t||s)(o.LFG(h.eN))},s.\u0275prov=o.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"});var v=i(5657);function Z(r,t){1&r&&(o.TgZ(0,"small",13),o._uU(1," Ingrese un correo valido "),o.qZA())}function A(r,t){1&r&&(o.TgZ(0,"small",13),o._uU(1," Contrase\xf1a no valida "),o.qZA())}class m{constructor(t,e,a,p){this.router=t,this.formBuilder=e,this.authService=a,this.cookie=p,this.mmessageError="",this.crearFormulario()}crearFormulario(){this.forma=this.formBuilder.group({email:["",[n.kI.required,n.kI.pattern(/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i)]],password:["",[n.kI.required,n.kI.minLength(6)]]})}get correoNoValido(){return this.forma.get("email").invalid&&this.forma.get("email").touched}get passNoValido(){return this.forma.get("password").invalid&&this.forma.get("password").touched}login(){if(this.forma.valid){const{email:t,password:e}=this.forma.value;this.authService.sendCredentials(t,e).subscribe(a=>{console.log("Session fue iniciada",a);const{tokenSession:p}=a;console.log(a),this.cookie.set("token",p,4,"/"),this.router.navigateByUrl("/usuarios")})}}}m.\u0275fac=function(t){return new(t||m)(o.Y36(d.F0),o.Y36(n.qu),o.Y36(s),o.Y36(v.N))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-login"]],decls:26,vars:8,consts:[[1,"container","mt-5"],[1,"text-center"],[1,"row","mt-5"],[1,"col-4","offset-4"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","formControlName","email",1,"form-control"],["class","text-danger",4,"ngIf"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1","formControlName","password",1,"form-control"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-success"],[1,"text-danger"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0)(1,"h1",1),o._uU(2,"Inicie su sesi\xf3n"),o.qZA(),o.TgZ(3,"div",2)(4,"div",3)(5,"form",4),o.NdJ("ngSubmit",function(){return e.login()}),o.TgZ(6,"div",5)(7,"label",6),o._uU(8,"Ingrese su correo"),o.qZA(),o._UZ(9,"input",7),o.YNc(10,Z,2,0,"small",8),o.qZA(),o.TgZ(11,"div",5)(12,"label",9),o._uU(13,"Ingrese su contrase\xf1a"),o.qZA(),o._UZ(14,"input",10),o.YNc(15,A,2,0,"small",8),o.qZA(),o.TgZ(16,"div",11)(17,"button",12),o._uU(18,"Acceder"),o.qZA()()(),o.TgZ(19,"pre"),o._uU(20),o._UZ(21,"br"),o._uU(22),o.qZA(),o.TgZ(23,"pre"),o._uU(24),o.ALo(25,"json"),o.qZA()()()()),2&t&&(o.xp6(5),o.Q6J("formGroup",e.forma),o.xp6(5),o.Q6J("ngIf",e.correoNoValido),o.xp6(5),o.Q6J("ngIf",e.passNoValido),o.xp6(5),o.hij("        Estado del formulario: ",e.forma.valid,"\n        "),o.xp6(2),o.hij("\n        Status: ",e.forma.status,"\n      "),o.xp6(2),o.hij("        ",o.lcZ(25,6,e.forma.value),"\n      "))},dependencies:[c.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,c.Ts]});const I=[{path:"login",component:m}];class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=o.oAB({type:u}),u.\u0275inj=o.cJS({imports:[d.Bz.forChild(I),d.Bz]});class l{}l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[c.ez,u,n.UX]})}}]);